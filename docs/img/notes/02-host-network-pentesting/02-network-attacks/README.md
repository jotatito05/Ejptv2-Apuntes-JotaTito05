# ğŸŒ Network Based Attacks: El Hombre en el Medio

## ğŸ‘‹ IntroducciÃ³n

Hasta ahora hemos atacado mÃ¡quinas. Ahora vamos a atacar **la conversaciÃ³n**.

Imagina que dos personas hablan por telÃ©fono.
*   **Host Attack:** Rompes la puerta de la casa de uno y le pones una pistola en la cabeza.
*   **Network Attack:** Te subes al poste de telÃ©fono y escuchas lo que dicen (Sniffing) o cortas el cable y te pones tÃº en medio (MITM).

En el eJPTv2, esto es vital para capturar credenciales que viajan por la red.

---

## ğŸ‘‚ Sniffing & Wireshark

**Wireshark** son tus ojos. Sin Ã©l, la red es invisible.
En el examen, a menudo te darÃ¡n un archivo `.pcap` (una grabaciÃ³n de trÃ¡fico) y te dirÃ¡n: *"Encuentra la contraseÃ±a del administrador"*.

### Filtros MÃ¡gicos para Wireshark
No busques aguja en pajar, usa imanes:
1.  `http.request.method == "POST"` -> Muestra solo cuando alguien envÃ­a datos (como un formulario de login).
2.  `ip.addr == 192.168.1.50` -> Muestra solo el trÃ¡fico de esa IP.
3.  `tcp.port == 21` -> Muestra trÃ¡fico FTP (que va en texto plano, Â¡contraseÃ±as gratis!).

> [!TIP]
> **Follow TCP Stream:**
> Click derecho en un paquete -> Follow -> TCP Stream.
> Esto reconstruye la conversaciÃ³n entera en texto legible. Es la forma mÃ¡s rÃ¡pida de ver quÃ© pasÃ³.

---

## ğŸ­ Man-in-the-Middle (MITM) y ARP Spoofing

En una red local (LAN), las mÃ¡quinas confÃ­an en el protocolo ARP.
*   MÃ¡quina A: "Â¿QuiÃ©n tiene la IP del Router?"
*   TÃº (Atacante): "Â¡Yo! Â¡Yo soy el Router!" (Mentira).

Si la MÃ¡quina A te cree, te enviarÃ¡ todo su trÃ¡fico a ti. TÃº lo lees (o modificas) y se lo pasas al Router real. Ellos no se enteran, y tÃº te quedas con sus secretos.

### Herramientas
*   **Arpspoof / Bettercap:** Para decirle mentiras a la red.
*   **Wireshark / Tcpdump:** Para leer las mentiras que te llegan.

---

## ğŸ“ Mis Notas Personales

```markdown
# Filtros de Wireshark que siempre uso
- ftp || telnet || http (Protocolos inseguros)
- frame contains "password"
```

---
[â¬…ï¸ Volver a Host & Network Pentesting](../README.md) | [â¡ï¸ Siguiente: Post-Exploitation](../03-post-exploitation/README.md)
